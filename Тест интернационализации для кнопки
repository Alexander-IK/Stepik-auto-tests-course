'''Задание: запуск автотестов для разных языков интерфейса
Мы хотим, чтобы разрабатываемый нами интернет-магазин работал одинаково хорошо для пользователей из любой страны.
Чтобы убедиться в работоспособности решения с поддержкой разных языков, мы планируем запускать набор автотестов для 
каждого языка. Вам как разработчику автотестов нужно реализовать решение, которое позволит запускать автотесты для разных
языков пользователей, передавая нужный язык в командной строке.напишите тест, который проверяет, что страница товара
на сайте содержит кнопку добавления в корзину. Например, можно проверять товар, доступный 
по http://selenium1py.pythonanywhere.com/catalogue/coders-at-work_207/.

NB: Код написан в jupyter notebook. Из командной строки не настраивается.'''

import pytest, time
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

lang = ['en-gb','fr','de','ru'][1]                # language selection

@pytest.fixture(scope="function")
def browser():
    options = Options()
    options.add_experimental_option('prefs', {'intl.accept_languages': lang}) 
    browser = webdriver.Chrome(options=options)  
    yield browser
    browser.quit()

link = "http://selenium1py.pythonanywhere.com/catalogue/coders-at-work_207/"

def test_guest_should_see_login_link_pass(browser):
    browser.get(link)
    time.sleep(10) # если не уменьшить размер окна браузера, тест упадет
    button = browser.find_element_by_css_selector("a.btn.btn-default.navbar-btn")
    button.click()
    assert browser.current_url[-7:] == 'basket/'
